<!DOCTYPE html>
<html>

<head>
    <title>Constants Editor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .matrix {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
        }

        .matrix-index {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .module {
            border: 1px solid #ddd;
            padding: 5px;
            margin-bottom: 10px;
        }

        .module-label {
            font-weight: bold;
        }

        .module-property {
            margin-left: 10px;
        }

        .edit-btn {
            display: block;
            margin-bottom: 10px;
        }

        textarea {
            width: 100%;
            height: 300px;
        }
    </style>
</head>

<body>
    <h1>Constants Editor</h1>
    <label for="matrixSelect">Select Matrix:</label>
    <select id="matrixSelect" onchange="loadMatrixData()">
        <option value="-1">--Select Matrix--</option>
    </select>

    <div id="constantsData">
        <!-- This div will be dynamically populated with the visual representation of the selected matrix data -->
    </div>
    <br>
    <button onclick="editConstants()">Edit</button>
    <button onclick="saveConstants()">Save</button>

    <script>
        // Constants data
        const constantsData = {
            "MATRICES": [
                {
                    "index": 0,
                    "module_matrix_pos": [
                        [
                            [
                                "VBox",
                                "Button",
                                0,
                                [0, 0, 0, 0],
                                "AlignCenter",
                                ["SizeExpanding", "SizeExpanding"],
                            ],
                        ],
                        [
                            [
                                "VBox",
                                "Label",
                                0,
                                [0, 0, 0, 0],
                                "AlignBottom",
                                ["SizeMinimum", "SizeMinimum"],
                            ],
                        ],
                    ],
                },
                {
                    "index": 1,
                    "module_matrix_pos": [
                        [
                            [
                                "VBox",
                                "TableView",
                                1,
                                [0, 0, 0, 0],
                                "AlignCenter",
                                ["SizeExpanding", "SizeExpanding"],
                            ],
                            [
                                [
                                    "VBox",
                                    "GraphicsView",
                                    0,
                                    [0, 0, 0, 0],
                                    "AlignCenter",
                                    ["SizeExpanding", "SizeExpanding"],
                                ],
                            ],
                        ],
                        [
                            [
                                "VBox",
                                "Button",
                                2,
                                [0, 0, 0, 0],
                                "AlignCenter",
                                ["SizeMinimum", "SizeMinimum"],
                            ],
                            [
                                [
                                    "VBox",
                                    "Button",
                                    3,
                                    [0, 0, 0, 0],
                                    "AlignCenter",
                                    ["SizeMinimum", "SizeMinimum"],
                                ],
                            ],
                            [
                                [
                                    "VBox",
                                    "Button",
                                    4,
                                    [0, 0, 0, 0],
                                    "AlignCenter",
                                    ["SizeMinimum", "SizeMinimum"],
                                ],
                            ],
                        ],
                        [
                            [
                                "VBox",
                                "Button",
                                5,
                                [0, 0, 0, 0],
                                "AlignCenter",
                                ["SizeMinimum", "SizeMinimum"],
                            ],
                            [
                                [
                                    "VBox",
                                    "Button",
                                    1,
                                    [0, 0, 0, 0],
                                    "AlignCenter",
                                    ["SizeMinimum", "SizeMinimum"],
                                ],
                            ],
                        ],
                        [
                            [
                                "VBox",
                                "Label",
                                0,
                                [0, 0, 0, 0],
                                "AlignCenter",
                                ["SizeMinimum", "SizeMinimum"],
                            ],
                        ],
                    ],
                },
            ],
        };

        function generateVisuals(data) {
            const constantsDataDiv = document.getElementById("constantsData");
            constantsDataDiv.innerHTML = ""; // Clear previous content

            const matrixDiv = document.createElement("div");
            matrixDiv.className = "matrix";

            const matrixIndex = document.createElement("div");
            matrixIndex.className = "matrix-index";
            matrixIndex.textContent = `Matrix Index: ${data.index}`;
            matrixDiv.appendChild(matrixIndex);

            data.module_matrix_pos.forEach((row) => {
                const moduleRowDiv = document.createElement("div");

                row.forEach((module) => {
                    const moduleDiv = document.createElement("div");
                    moduleDiv.className = "module";

                    const moduleLabel = document.createElement("div");
                    moduleLabel.className = "module-label";
                    moduleLabel.textContent = module[1];
                    moduleDiv.appendChild(moduleLabel);

                    const propertiesDiv = document.createElement("div");
                    moduleDiv.appendChild(propertiesDiv);

                    for (let i = 2; i < module.length; i++) {
                        const property = module[i];
                        const propertyDiv = document.createElement("div");
                        propertyDiv.className = "module-property";

                        const propertyLabel = document.createElement("label");
                        propertyLabel.textContent = `${Object.keys(property)[0]}: `;
                        propertyDiv.appendChild(propertyLabel);

                        const propertyValue = document.createElement("span");
                        propertyValue.textContent = property[Object.keys(property)[0]];
                        propertyDiv.appendChild(propertyValue);

                        propertiesDiv.appendChild(propertyDiv);
                    }

                    moduleRowDiv.appendChild(moduleDiv);
                });

                matrixDiv.appendChild(moduleRowDiv);
            });

            constantsDataDiv.appendChild(matrixDiv);
        }

        function loadMatrixData() {
            const matrixIndex = parseInt(matrixSelect.value);
            if (matrixIndex >= 0) {
                generateVisuals(constantsData.MATRICES[matrixIndex]);
            } else {
                document.getElementById("constantsData").innerHTML = "";
            }
        }

        function editConstants() {
            const textarea = document.createElement("textarea");
            textarea.id = "constantsTextarea";
            textarea.value = JSON.stringify(constantsData, null, 2);
            document.getElementById("constantsData").innerHTML = "";
            document.getElementById("constantsData").appendChild(textarea);
        }

        function saveConstants() {
            const textarea = document.getElementById("constantsTextarea");
            try {
                const editedData = JSON.parse(textarea.value);
                constantsData.MATRICES = editedData.MATRICES;
                loadMatrixData();
                alert("Constants saved successfully!");
            } catch (error) {
                alert("Error parsing JSON data. Please ensure it is valid JSON.");
            }
        }

        // Generate visuals for the initial matrix on load
        loadMatrixData();
    </script>
</body>

</html>